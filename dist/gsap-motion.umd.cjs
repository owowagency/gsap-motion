(function(o,r){typeof exports=="object"&&typeof module<"u"?r(exports,require("rxjs"),require("gsap")):typeof define=="function"&&define.amd?define(["exports","rxjs","gsap"],r):(o=typeof globalThis<"u"?globalThis:o||self,r(o.gsapMotion={},o.rxjs,o.gsap))})(this,function(o,r,f){"use strict";var oe=Object.defineProperty;var ce=(o,r,f)=>r in o?oe(o,r,{enumerable:!0,configurable:!0,writable:!0,value:f}):o[r]=f;var n=(o,r,f)=>(ce(o,typeof r!="symbol"?r+"":r,f),f);var y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function F(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var H="Expected a function",I=0/0,X="[object Symbol]",B=/^\s+|\s+$/g,Y=/^[-+]0x[0-9a-f]+$/i,D=/^0b[01]+$/i,Q=/^0o[0-7]+$/i,$=parseInt,A=typeof y=="object"&&y&&y.Object===Object&&y,N=typeof self=="object"&&self&&self.Object===Object&&self,P=A||N||Function("return this")(),_=Object.prototype,q=_.toString,G=Math.max,U=Math.min,T=function(){return P.Date.now()};function J(e,i,t){var l,h,u,c,a,d,m=0,M=!1,v=!1,j=!0;if(typeof e!="function")throw new TypeError(H);i=E(i)||0,S(t)&&(M=!!t.leading,v="maxWait"in t,u=v?G(E(t.maxWait)||0,i):u,j="trailing"in t?!!t.trailing:j);function x(s){var b=l,g=h;return l=h=void 0,m=s,c=e.apply(g,b),c}function te(s){return m=s,a=setTimeout(O,i),M?x(s):c}function ne(s){var b=s-d,g=s-m,C=i-b;return v?U(C,u-g):C}function L(s){var b=s-d,g=s-m;return d===void 0||b>=i||b<0||v&&g>=u}function O(){var s=T();if(L(s))return W(s);a=setTimeout(O,ne(s))}function W(s){return a=void 0,j&&l?x(s):(l=h=void 0,c)}function se(){a!==void 0&&clearTimeout(a),m=0,l=d=h=a=void 0}function re(){return a===void 0?c:W(T())}function k(){var s=T(),b=L(s);if(l=arguments,h=this,d=s,b){if(a===void 0)return te(d);if(v)return a=setTimeout(O,i),x(d)}return a===void 0&&(a=setTimeout(O,i)),c}return k.cancel=se,k.flush=re,k}function S(e){var i=typeof e;return!!e&&(i=="object"||i=="function")}function K(e){return!!e&&typeof e=="object"}function V(e){return typeof e=="symbol"||K(e)&&q.call(e)==X}function E(e){if(typeof e=="number")return e;if(V(e))return I;if(S(e)){var i=typeof e.valueOf=="function"?e.valueOf():e;e=S(i)?i+"":i}if(typeof e!="string")return e===0?e:+e;e=e.replace(B,"");var t=D.test(e);return t||Q.test(e)?$(e.slice(2),t?2:8):Y.test(e)?I:+e}var Z=J;const ee=F(Z),R=class{constructor(i,t={}){n(this,"mediaQueryList");n(this,"motionResizeObserver");n(this,"meta",{});n(this,"subscriptions",[]);n(this,"create");n(this,"cleanup");n(this,"reset",ee(()=>{var i;(i=this.cleanup)==null||i.call(this),requestAnimationFrame(()=>{var t;this.cleanup=((t=this.create)==null?void 0:t.call(this,this))??void 0})},R.resetDebounceTime,{leading:!0}));n(this,"destroy",()=>{var i,t;for((i=this.cleanup)==null||i.call(this),this.cleanup=void 0,this.create=void 0,this.mediaQueryList=void 0,this.motionResizeObserver=void 0;this.subscriptions.length;)(t=this.subscriptions.pop())==null||t.unsubscribe()});this.observeMedia(t.watchMedia),this.observeResize(t.shouldResetOnResize),this.create=()=>{var u,c;return[((u=t.enable)==null?void 0:u.call(t))??!0,((c=this.mediaQueryList)==null?void 0:c.matches)??!0].every(Boolean)?i(this):void 0},this.cleanup=this.create(this)??void 0}static get referenceFrameTime(){return 1e3/this.referenceFramerate}static applyDeltaRatio(i){return i*f.ticker.deltaRatio(this.referenceFramerate)}observeMedia(i){i&&(this.mediaQueryList=matchMedia(i),this.subscriptions.push(r.fromEvent(this.mediaQueryList,"change").subscribe(()=>this.reset())))}observeResize(i){i&&(this.motionResizeObserver=new ie(i),this.subscriptions.push(this.motionResizeObserver.observable.pipe(r.debounceTime(500)).subscribe(()=>this.reset())))}};let p=R;n(p,"resetDebounceTime",100),n(p,"referenceFramerate",60);class ie{constructor(i){n(this,"axis");n(this,"element");n(this,"inlineSize");n(this,"blockSize");n(this,"observable");const[t,l]=[i].flat();this.element=typeof t=="string"?document.querySelector(t):t,this.axis=l,this.observable=new r.Observable(h=>{const u=new ResizeObserver(c=>this.handleResize(c,h));return this.element&&u.observe(this.element),()=>u.disconnect()})}handleResize(i,t){const l=i.find(m=>m.target===this.element);if(!l)return;const{inlineSize:h,blockSize:u}=l.borderBoxSize[0],c=h!==this.inlineSize,a=u!==this.blockSize,d=this.inlineSize==null||this.blockSize==null;if(this.inlineSize=h,this.blockSize=u,!d){if(this.axis==="horizontal"&&c||this.axis==="vertical"&&a)return t.next();!this.axis&&(c||a)&&t.next()}}}const z=class{constructor(){n(this,"subscriptions",[]);n(this,"viewWidth",window.innerWidth);n(this,"viewHeight",window.innerHeight);n(this,"clientX",this.viewWidth/2);n(this,"clientY",this.viewHeight/2);n(this,"normalX",.5);n(this,"normalY",.5);n(this,"observable",r.fromEvent(window,"mousemove"));n(this,"motion",new p(i=>{this.subscriptions.push(this.observable.subscribe(t=>{this.clientX=t.clientX,this.clientY=t.clientY,this.normalX=f.utils.mapRange(0,this.viewWidth,0,1,this.clientX),this.normalY=f.utils.mapRange(0,this.viewHeight,0,1,this.clientY)})),this.subscriptions.push(r.fromEvent(window,"resize").subscribe(()=>{this.viewWidth=window.innerWidth,this.viewHeight=window.innerHeight})),i.meta.label="Pointer"},{watchMedia:"(pointer: fine)"}));n(this,"destroy",()=>{this.subscriptions.forEach(i=>i.unsubscribe()),this.motion.destroy()});return z.instance}static get instance(){return this._instance??(this._instance=new z)}};let w=z;n(w,"_instance"),o.Motion=p,o.Pointer=w,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
